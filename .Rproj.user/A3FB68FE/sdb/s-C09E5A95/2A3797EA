{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Diagram of plant disease severity\"\noutput: \n  flexdashboard::flex_dashboard:\n    css: style.css\n    logo: logo-sad.gif\n---\n\n<script src=\"https://use.fontawesome.com/682f97eaed.js\"></script>\n\n\n\n```{r, include=FALSE}\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(readr)\nlibrary(plyr)\nlibrary(dplyr)\nlibrary(tidyr)\n```\n\n\n```{r, include=FALSE}\n# reading the data from file\n\n\ndat_sad <- read_csv (\"dat_sad.csv\")\nattach(dat_sad)\ndat_sad$citation <- paste(author, pub_year)\ndat_sad$study_diag <- with(dat_sad, interaction(study, diag_id))\ndat_sad$citation_diag <- with(dat_sad, interaction(citation, diag_id))\ndetach(dat_sad)\n# aggregate by individidual studies\ndat_sad <- group_by(dat_sad, study)\ndat_sad1 <- filter(dat_sad, row_number()==1 )\n```\n\n```{r, include=FALSE}\n\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, pathogen, pathogen_group, journal, country, lang, pub_type, citation, link1, link, link2)\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n```\n\n\nSummary Plots {data-icon=\"fa-bar-chart\"}\n=====================================\n\n\nColumn {.tabset data-width=350px}\n----------------------------------\n\n### <i class=\"fa fa-home\" aria-hidden=\"true\"></i> About \n\n**What is the SADBank?**\n\nThe \n**SAD<i class=\"fa fa-leaf\" aria-hidden=\"true\"></i>Bank**  is a database of Standard Area Diagrams (SADs) of plant disease severity. The database supplements an article published in *Phytopathology* [(Del Ponte et al. 2016)](http://www.apsnet.org). In this artigle, studies on SAD were systematically reviewed methods for SAD construction and validation were described. This database presents data from the article and is updated continuously as more SADs are made available. \n\n\n**What are SADs?**\n\nStandard area diagrams (SADs), also know as diagrammatic scales, are a set of pictorial representation (diagram) of disease symptoms/signs in a plant organ. Each diagram depicts a percent diseased area. They are designed in a wide range of styles. Explore the [summary plots](#summary-plots) and [tables](#tables) with information on SADs extracted from the reviewed articles.\n\n**How are SADs used?**\n\nSADs are tools used during or prior to visual assessments of disease severity to \"calibrate\" a rater's eye with the aim to improve accuracy, precision and reliability of the estimates. \n\nDuring estimation, the rater assigns a percent value that should be as close as much to \"actual\" values. The diagrams in the SADs serve as a guide for interpolation. In most studies, SADs have proven of value especially for innately inaccurate raters and certain symptoms/signs that are more difficult to evaluate.\n\n\n### <i class=\"fa fa-bar-chart\" aria-hidden=\"true\"></i> Plotted variables description\n\n**Description of plotted variables**\n\n- **Articles/year** -\nNumber of articles published per year and language of the publication where EN = english, ES = spanish and PT = Portuguese.\n\n- **N. of samples** - \nFrequency of the number of specimens (leaf, fruit, stalk, etc.) collected in the field or experimental plots which were analyzed to determine the range of actual disease severity.\n\n- **Software** -\nFrequency of the approach used to determine the actual severity values in the samples, including digital image analysis tools or instruments such as leaf area meater.\n\n- **N. of diagrams** - \nNumber of diagrams (severity values) depicting a percent diseased area in a SAD set.\n\n- **Min sev** - \nFrequency of the minimum non-zero severity diagram depicted in the SAD.\n\n- **Max sev** -\nFrequency of the maximum severity diagram depicted in the SAD.\n\n- **SAD color** -\nFrequency of the color scheme used to depict the SAD such as black-white, 2-color, true-color, etc.\n\n- **Max sev vs. ndiag** -\nScatterplot for the relationship between the number of diagrams and the maximum severity depicted in the SAD.\n\n- **Country** -\nMap depicting the number of studies by country of the research group that conducted the study.\n\n\n### <i class=\"fa fa-user\" aria-hidden=\"true\"></i> Credits\n\n**SAD<i class=\"fa fa-leaf\" aria-hidden=\"true\"></i>Bank** is curated by Dr. Emerson Del Ponte, coordinator of the [Epidemiology Lab](http://www.dfp.ufv.br/epidemiology) of the Universidade Federal de Vi√ßosa, Brazil. Other people who are key collaborators who help to maintain the database are:\n\n- Dr. Sarah J. Pethybridge, [EVADE](http://evade.pppmb.cals.cornell.edu) Lab, Cornell University, USA\n\n- Dr. Sami J. Michereff, Universidade Federal Rural de Pernambuco, Recife, Brazil\n\n- Franklin J. Machado, Graduate Student Epidemiology Lab UFV\n\n\nColumn {.tabset}\n----------------------------------\n\n### Articles/year\n\n\n```{r, echo=FALSE}\nlibrary(ggplot2)\nlibrary(plotly)\n\ng_artigos <- ggplot(dat_sad1, aes(factor(pub_year), fill=lang)) + geom_bar() +\n         scale_y_continuous(breaks=seq(0, 12, 1), expand=c(0.02, 0))+\n       xlab(\"Year\")+ ylab(\"Number of articles\")+\n  theme_minimal()+\n       theme(axis.text.x = element_text(angle = 90, hjust = 1), legend.position=\"none\")+\n         scale_fill_manual(values = c(\"steelblue\",\"brown\", \"limegreen\"))+\n  labs(fill = \"Language\")\n      \n(gg <- ggplotly(g_artigos))\n``` \n\n### N. of samples\n\n```{r}\nn_dev <- subset(dat_sad2, n_dev <1000, select = n_dev)\ng_nsamples <- ggplot(n_dev, aes(x=n_dev))+\ngeom_histogram(binwidth=50, color = \"white\", fill = \"SteelBlue\")+ \n xlab(\"Number of samples\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500))+\n  theme_minimal()\n(gg <- ggplotly(g_nsamples, tooltip = c(\"count\")))\n\n\n\n```\n\n\n### Software\n\n```{r}\nlibrary(RColorBrewer)\ndat_sad1$sev_quant2 <- with(dat_sad1, reorder(sev_quant, sev_quant, function(x) length(x)))\ng_soft <- ggplot(dat_sad1, aes(sev_quant2, fill=sev_quant2)) +\n            geom_bar() + coord_flip()+\n            scale_y_continuous(breaks=seq(0, 100, 2),\n                               expand=c(0, 0))+\n            xlab(\"\")+ ylab(\"Number of studies\")+\n  theme_minimal()+\n            theme(legend.position=\"none\")+\n scale_fill_hue(\"clarity\", direction = -1)\n           \n(gg <- ggplotly(g_soft, tooltip = c(\"count\")))\n\n```\n\n### N. of diagrams\n```{r}\n\n\ng_ndiag<- ggplot(dat_sad1, aes(x=n_diagrams))+\ngeom_histogram( binwidth=1, color = \"white\", fill = \"steelblue\")+ \n xlab(\"Number of diagrams in the SAD\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(1:12))+\ntheme_minimal()\n(gg <- ggplotly(g_ndiag, tooltip = c(\"count\")))\n```\n\n### Min. sev\n\n```{r}\ng_minsev <- ggplot(dat_sad2, aes(x=min_sev))+\ngeom_histogram(fill = \"steelblue\", color = \"white\")+ \n xlab(\"Minimum severity (%)\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(0:11))+\n  theme_minimal()\n(gg <- ggplotly(g_minsev))\n```\n\n### Max. sev\n\n```{r}\ng_maxsev <- ggplot(dat_sad2, aes(x=max_sev))+\ngeom_histogram(fill = \"steelblue\", color = \"white\")+ \n xlab(\"Maximum severity (%)\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80, 90, 100 ))+\n theme_minimal()\n(gg <- ggplotly(g_maxsev, tooltip = c(\"count\")))\n```\n\n### SAD color\n\n```{r}\ndat_sad2$col_type2 <- with(dat_sad2, reorder(col_type, col_type, function(x) length(x)))\ng_color <- ggplot(dat_sad2, aes(col_type2, fill=diag_type)) +\n            geom_bar() + coord_flip()+\n            scale_y_continuous(breaks=seq(0, 100, 5), expand=c(0.02, 0))+\n            xlab(\"\")+ ylab(\"Number of SADs\")+\n theme_minimal()+\n            theme(legend.position = \"none\")+ scale_fill_manual(values = c(\"steelblue\", \"limegreen\"))\n (gg <- ggplotly(g_color))\n```\n\n### Max sev x ndiag\n\n```{r}\ng_rel1 <- ggplot(dat_sad2, aes(max_sev, n_diagrams))+\ngeom_point(aes(alpha=0.5), size=3, colour = \"limegreen\",\n            position = position_jitter(width=.2))+\n stat_smooth(colour=\"steelblue\", size=0.75, alpha=0.1)+\n  theme_minimal()+\n theme(legend.position = \"none\")+\n scale_y_continuous(breaks=c(1:12 ))+\n ylab(\"Number of diagrams\")+\n xlab(\"Maximum severity (%)\")\n(gg <- ggplotly(g_rel1))\n\n\n```\n\n\n### Country\n\n```{r}\nlibrary(plotly)\n\n\ndf <- read.csv('country.csv')\n\n# light grey boundaries\nl <- list(color = toRGB(\"grey\"), width = 0.5)\n\n# specify map projection/options\ng <- list(\n  showframe = FALSE,\n  showcoastlines = TRUE)\n\n\nplot_ly(df, z = SAD, text = COUNTRY, locations = CODE, type = 'choropleth', showscale = FALSE,\n        color = SAD, colors = c(\"white\", \"steelblue\"), marker = list(line = l), title = '') %>%\n  layout(title = '<br>Country of the authorship of studies</br> on the development and validation of SADs',\n         geo = g)\n\n```\n\nTables {data-icon=\"fa-table\"}\n=====================================\n\n\nColumn {.tabset }\n-------------------------------------\n \n### Study information\n\n\n\n```{r}\nlibrary(magrittr)\nlibrary(DT)\n\ndatatable(table1,\n          escape = FALSE,\n          class = 'cell-border stripe',\n          rownames = FALSE, colnames = c('Publication year','Crop', 'Pathogen', 'Pathogen group', 'Journal', 'Country', 'Language', 'Publication type',  'Reference', 'Link'), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('crop', 'pathogen', 'pathogen_group', 'pub_year','journal', 'country', 'lang', 'pub_type', 'citation', 'weblink'),\n  fontSize = '90%')\n\n```\n\n   \n### SAD characteristics\n\n```{r, include=FALSE}\nlibrary(plyr)\nlibrary(dplyr)\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, dis_name, pathogen, n_diag, organ, diag_type, col_type, n_diagrams, min_sev, max_sev, citation, link1, link, link2)\n\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n\n```\n\n```{r}\n\n\ndatatable(table1, \n          escape = FALSE,\n          class = 'cell-border stripe',\n        rownames = FALSE, colnames = c('Publication year','Crop', 'Disease name', 'Pathogen', 'N. of sets','Organ', 'Design type', 'Diagram color', 'N. of diagrams', 'Min. Severity', 'Max. Severity', 'Reference', \"Link\"), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('pub_year', 'crop','dis_name','pathogen', 'n_diag', 'organ', 'diag_type', 'col_type', 'n_diagrams', 'min_sev', 'max_sev', 'citation', 'weblink'),\n  fontSize = '90%')\n\n```\n\n\n### SAD validation approach \n\n```{r, include=FALSE}\nlibrary(plyr)\nlibrary(dplyr)\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, dis_name, pathogen, validation, stat, coefs, n_valid, citation, link1, link, link2)\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n\n```\n\n```{r}\n\ndatatable(table1, \n          escape = FALSE,\n          class = 'cell-border stripe',\n                  rownames = FALSE, colnames = c('Publication year','Crop', 'Disease name', 'Pathogen', 'Validation approach', 'Statistics', 'Reported coefficients', 'N. of specimens assessed', 'Reference', 'Link'), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('pub_year', 'crop','dis_name','pathogen', 'validation', 'stat', 'coefs', 'n_valid', 'citation', 'weblink'),\n  fontSize = '90%')\n\n```\n\n\n\n\n\n\n",
    "created" : 1466169986950.000,
    "dirty" : false,
    "encoding" : "UTF-8-MAC",
    "folds" : "",
    "hash" : "2622350220",
    "id" : "2A3797EA",
    "lastKnownWriteTime" : 1466172145,
    "last_content_update" : 1466172145,
    "path" : "~/Documents/github/SADBank/index.Rmd",
    "project_path" : "index.Rmd",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}