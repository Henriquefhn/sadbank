{
    "collab_server" : "",
    "contents" : "---\ntitle: \"SADBank: Standard Area Diagrams to Aid Plant Disease Severity Estimates        \"\noutput: \n  flexdashboard::flex_dashboard:\n    theme: flatly\n    css: style.css\n---\n\n<script src=\"https://use.fontawesome.com/682f97eaed.js\"></script>\n\n\n```{r, include=FALSE}\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(readr)\nlibrary(plyr)\nlibrary(dplyr)\nlibrary(tidyr)\n```\n\n\n```{r, include=FALSE}\n# Reading the data \ndat_sad <- read_csv (\"dat_sad.csv\")\nattach(dat_sad)\ndat_sad$citation <- paste(author, pub_year)\ndat_sad$study_diag <- with(dat_sad, interaction(study, diag_id))\ndat_sad$citation_diag <- with(dat_sad, interaction(citation, diag_id))\ndetach(dat_sad)\n\n# aggregate by individidual studies\ndat_sad <- group_by(dat_sad, study)\ndat_sad1 <- filter(dat_sad, row_number()==1 )\n```\n\n```{r, include=FALSE}\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, pathogen, pathogen_group, journal, country, lang, pub_type, citation, link1, link, link2)\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n```\n\n\nSummary Plots {data-icon=\"fa-bar-chart\"}\n=====================================\n\nColumn {.tabset data-width=530px}\n----------------------------------\n\n### <i class=\"fa fa-home\" aria-hidden=\"true\"></i> About \n<b class=rev>What is SADBank</b>\n\n**SAD<i class=\"fa fa-leaf\" aria-hidden=\"true\"></i>Bank** is a database of Standard Area Diagrams (SADs) of plant disease severity. The database supplements a research article submitted to *Phytopathology* and will be updated as more SADs are published in the literature. \n\n<b class=rev>How to use it?</b>\n\nThere two pages showing [Plots](#summary-plots) (right panel of this page) and [Tables](#tables) that summarize characteristics of the peer-reviewd publication and the SADs. In Tables, there are three tables with tabuluar information for the 1) publication; 2) SAD characteristics and 3) the validation approach. A weblink allows direct access to the publication.\n\n<b class=rev>What are SADs?</b>\n\nAlso known as disease diagrams or diagrammatic scales, SADs are a set of pictorial representation  of disease symptoms and/or signs in a plant organ. Each diagram depicts a percent diseased area. They are designed in a wide range of styles. \n\n<b class=rev>How are SADs used?</b>\n\nSADs are tools to use during or prior to visual assessments of disease severity to \"calibrate\" a rater's eye and improve accuracy, precision and reliability of the estimates. During estimation, the rater assigns a perceived percent value  as close as much to the reference. The diagrams  serve as a guide for interpolation. \n\n### <i class=\"fa fa-bar-chart\" aria-hidden=\"true\"></i> Variable description\n<b class=rev>Description of variables</b>\n\n\n- **Articles/year** -\nNumber of articles published per year and language of the publication where EN = english, ES = spanish and PT = Portuguese.\n\n- **N. of specimens** - \nFrequency of the number of specimens (leaf, fruit, stalk, etc.) collected in the field or experimental plots and analyzed to determine the range of actual (true) disease severity, usually using digital analysis.\n\n- **Actual severity estimation** -\nFrequency of the approach used to determine the actual severity values in the samples, including digital image analysis tools or instruments such as leaf area meater and planimeter.\n\n- **N. of diagrams** - \nNumber of diagrams (severity values) depicting a percent diseased area in the SAD set.\n\n- **Min sev** - \nFrequency of the minimum non-zero severity depicted in the SAD.\n\n- **Max sev** -\nFrequency of the maximum severity depicted in the SAD.\n\n- **SAD color** -\nFrequency of the color scheme used to depict the SAD such as black-white, 2-color, true-color, etc.\n\n- **Max sev vs. ndiag** -\nScatterplot for the relationship between the number of diagrams and the maximum severity depicted in the SAD.\n\n- **Country** -\nMap depicting the number of studies by country of the research group conducting the study.\n\n\n### <i class=\"fa fa-user\" aria-hidden=\"true\"></i> Credits\n\n<b class=rev>Curator and collaborators</b>\n\n**SAD<i class=\"fa fa-leaf\" aria-hidden=\"true\"></i>Bank** is curated by Prof. Emerson Del Ponte, coordinator of the [Epidemiology Lab](http://www.dfp.ufv.br/epidemiology) of the Universidade Federal de Vi√ßosa, Brazil. People who are key collaborators and support the development of the SAD project are:\n\n- Dr. Sarah J. Pethybridge, [EVADE](http://evade.pppmb.cals.cornell.edu) Lab, Cornell University, USA\n\n- Dr. Sami J. Michereff, Universidade Federal Rural de Pernambuco, Recife, Brazil\n\n- Dr. Clive Bock, USDA/ARS, United States\n\n- Franklin J. Machado, Graduate Student Epidemiology Lab UFV\n\n\nColumn {.tabset}\n----------------------------------\n\n### Articles/year\n\n\n```{r, echo=FALSE}\nlibrary(ggplot2)\nlibrary(plotly)\n\ng_artigos <- ggplot(dat_sad1, aes(factor(pub_year), fill=lang)) + geom_bar() +\n         scale_y_continuous(breaks=seq(0, 12, 1), expand=c(0.02, 0))+\n       xlab(\"Year\")+ ylab(\"Number of articles\")+\n  theme_minimal()+\n       theme(axis.text.x = element_text(angle = 90, hjust = 1), legend.position=\"right\")+\n         scale_fill_manual(values = c(\"steelblue\",\"brown\", \"#3CB371\"))+\n  labs(fill = \"Language\")\n      \n(gg <- ggplotly(g_artigos))\n``` \n\n### Number of specimens\n\n```{r}\nn_dev <- subset(dat_sad2, n_dev <1000, select = n_dev)\ng_nsamples <- ggplot(n_dev, aes(x=n_dev))+\ngeom_histogram(binwidth=50, color = \"white\", fill = \"#3CB371\")+ \n labs(x = \"Number of samples\", y = \"Frequency\")+\n scale_x_continuous(breaks=c(0, 50, 100, 150, 200, 250, 300, 350, 400, 450, 500))+\n  theme_minimal()\n(gg <- ggplotly(g_nsamples, tooltip = c(\"count\")))\n\n\n\n```\n\n\n### Method severity estimation\n\n```{r}\nlibrary(RColorBrewer)\ndat_sad1$sev_quant2 <- with(dat_sad1, reorder(sev_quant, sev_quant, function(x) length(x)))\ng_soft <- ggplot(dat_sad1, aes(sev_quant2)) +\n            geom_bar(fill = \"#3CB371\") + coord_flip()+\n            scale_y_continuous(breaks=seq(0, 100, 2),\n                               expand=c(0, 0))+\n            xlab(\"\")+ ylab(\"Number of studies\")+\n  theme_minimal()+\n            theme(legend.position=\"none\")+\n scale_fill_hue(\"clarity\", direction = -1)\n           \n(gg <- ggplotly(g_soft, tooltip = c(\"count\")))\n\n```\n\n### N. of diagrams\n```{r}\n\n\ng_ndiag<- ggplot(dat_sad1, aes(x=n_diagrams))+\ngeom_histogram( binwidth=1, color = \"white\", fill = \"#3CB371\")+ \n xlab(\"Number of diagrams in the SAD\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(1:12))+\ntheme_minimal()\n(gg <- ggplotly(g_ndiag, tooltip = c(\"count\")))\n```\n\n### Min. severity\n\n```{r}\ng_minsev <- ggplot(dat_sad2, aes(x=min_sev))+\ngeom_histogram(fill = \"#3CB371\", color = \"white\")+ \n xlab(\"Minimum severity (%)\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(0:11))+\n  theme_minimal()\n(gg <- ggplotly(g_minsev))\n```\n\n### Max. severity\n\n```{r}\ng_maxsev <- ggplot(dat_sad2, aes(x=max_sev))+\ngeom_histogram(fill = \"#3CB371\", color = \"white\")+ \n xlab(\"Maximum severity (%)\")+\n ylab(\"Frequency\")+\n scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80, 90, 100 ))+\n theme_minimal()\n(gg <- ggplotly(g_maxsev, tooltip = c(\"count\")))\n```\n\n### SAD color\n\n```{r}\ndat_sad2$col_type2 <- with(dat_sad2, reorder(col_type, col_type, function(x) length(x)))\ng_color <- ggplot(dat_sad2, aes(col_type2, fill=diag_type)) +\n            geom_bar() + coord_flip()+\n            scale_y_continuous(breaks=seq(0, 100, 5), expand=c(0.02, 0))+\n            xlab(\"\")+ ylab(\"Number of SADs\")+\n theme_minimal()+\n            theme(legend.position = \"right\")+ scale_fill_manual(values = c(\"steelblue\", \"#3CB371\"))\n (gg <- ggplotly(g_color))\n```\n\n### Max. sev. and n. of diagrams\n\n```{r}\ng_rel1 <- ggplot(dat_sad2, aes(max_sev, n_diagrams))+\ngeom_point(aes(alpha=0.5), size=3, colour = \"#3CB371\",\n            position = position_jitter(width=.2))+\n stat_smooth(colour=\"steelblue\", size=0.75, alpha=0.1)+\n  theme_minimal()+\n theme(legend.position = \"none\")+\n scale_y_continuous(breaks=c(1:12 ))+\n ylab(\"Number of diagrams\")+\n xlab(\"Maximum severity (%)\")\n(gg <- ggplotly(g_rel1))\n\n\n```\n\n\n### Country research group\n\n```{r}\nlibrary(plotly)\n\ndf <- read.csv('country.csv')\n\n# light grey boundaries\nl <- list(color = toRGB(\"grey\"), width = 0.5)\n\n# specify map projection/options\ng <- list(\n  showframe = FALSE,\n  showcoastlines = TRUE)\n\n\nplot_ly(df, z = SAD, text = COUNTRY, locations = CODE, type = 'choropleth', showscale = FALSE,\n        color = SAD, colors = c(\"white\", \"#3CB371\"), marker = list(line = l), title = '') %>%\n  layout(title = '<br>Country of the authorship of studies</br> on the development and validation of SADs',\n         geo = g)\n\n```\n\nTables {data-icon=\"fa-table\"}\n=====================================\n\n\nColumn {.tabset }\n-------------------------------------\n \n### Study information\n\n\n```{r}\nlibrary(magrittr)\nlibrary(DT)\n\ndatatable(table1,\n          escape = FALSE,\n          class = 'cell-border stripe',\n          rownames = FALSE, colnames = c('Publication year','Crop', 'Pathogen', 'Pathogen group', 'Journal', 'Country', 'Language', 'Publication type',  'Reference', 'Link'), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('crop', 'pathogen', 'pathogen_group', 'pub_year','journal', 'country', 'lang', 'pub_type', 'citation', 'weblink'),\n  fontSize = '90%')\n\n```\n\n   \n### SAD characteristics\n\n```{r, include=FALSE}\nlibrary(plyr)\nlibrary(dplyr)\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, dis_name, pathogen, n_diag, organ, diag_type, col_type, n_diagrams, min_sev, max_sev, citation, link1, link, link2)\n\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n\n```\n\n```{r}\ndatatable(table1, \n          escape = FALSE,\n          class = 'cell-border stripe',\n        rownames = FALSE, colnames = c('Publication year','Crop', 'Disease name', 'Pathogen', 'N. of sets','Organ', 'Design type', 'Diagram color', 'N. of diagrams', 'Min. Severity', 'Max. Severity', 'Reference', \"Link\"), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('pub_year', 'crop','dis_name','pathogen', 'n_diag', 'organ', 'diag_type', 'col_type', 'n_diagrams', 'min_sev', 'max_sev', 'citation', 'weblink'),\n  fontSize = '90%')\n```\n\n\n### SAD validation approach \n\n```{r, include=FALSE}\nlibrary(plyr)\nlibrary(dplyr)\ndat_sad2 <- ungroup(dat_sad1)\ntable1 <- select(dat_sad2, pub_year, crop, dis_name, pathogen, validation, stat, coefs, n_valid, citation, link1, link, link2)\ntable1 <- arrange(table1, -pub_year)\ntable1 <- unite(table1, weblink, link1, link, link2, sep = \"\")\n\n\n```\n\n```{r}\n\ndatatable(table1, \n          escape = FALSE,\n          class = 'cell-border stripe',\n                  rownames = FALSE, colnames = c('Publication year','Crop', 'Disease name', 'Pathogen', 'Validation approach', 'Statistics', 'Reported coefficients', 'N. of specimens assessed', 'Reference', 'Link'), \n          options = list(\n  pageLength = 25,\n  fontSize = 12,\n  lengthMenu = c(10, 25, 50, 100 )\n))%>%\nformatStyle(\n  c('pub_year', 'crop','dis_name','pathogen', 'validation', 'stat', 'coefs', 'n_valid', 'citation', 'weblink'),\n  fontSize = '90%')\n\n```\n\n\n\n\n\n\n",
    "created" : 1471700237781.000,
    "dirty" : false,
    "encoding" : "UTF-8-MAC",
    "folds" : "",
    "hash" : "3444117312",
    "id" : "16AC34A",
    "lastKnownWriteTime" : 1471706574,
    "last_content_update" : 1471706574,
    "path" : "~/Documents/github/SADBank/index.Rmd",
    "project_path" : "index.Rmd",
    "properties" : {
        "docOutlineSize" : "129",
        "docOutlineVisible" : "1",
        "source_window_id" : ""
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}